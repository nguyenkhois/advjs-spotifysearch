{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/index.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","configurable","enumerable","get","r","value","n","__esModule","object","property","prototype","hasOwnProperty","p","s","slMarket","document","getElementById","slSearchBy","txtSearchContent","btnSearch","btnAuth","dspSearchResults","imageNotFound","renderTrack","objTrack","trackImage","album","images","length","url","node","createElement","innerHTML","album_type","artists","external_urls","spotify","renderArtist","objArtist","artistImage","urlAuth","encodeURIComponent","accessToken","param","sQueryString","URL","split","searchParams","URLSearchParams","has","e","getParamFromUrl","disabled","addEventListener","event","preventDefault","window","location","href","searchMarket","searchBy","searchContent","fetch","urlSearch","method","headers","Headers","Accept","Content-Type","Authorization","then","data","json","result","objTracks","console","log","tracks","items","appendChild","showTracks","objArtists","append","showArtists","error","catch","objError"],"mappings":"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","file":"bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"build\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n","//Beginning for app\r\n//Get HTML elements\r\nlet slMarket = document.getElementById(\"slMarket\");\r\nlet slSearchBy = document.getElementById(\"slSearchBy\");\r\nlet txtSearchContent = document.getElementById(\"txtSearchContent\");\r\nlet btnSearch = document.getElementById(\"btnSearch\");\r\nlet btnAuth = document.getElementById(\"btnAuth\");\r\nlet dspSearchResults = document.getElementById(\"dspSearchResults\");\r\nlet imageNotFound = \"images/imagenotfound.png\";\r\n\r\n//Functions\r\nfunction getParamFromUrl(param){\r\n    try{\r\n        let sQueryString = document.URL.split(\"#\")[1] || document.URL.split(\"?\")[1];\r\n        let searchParams = new URLSearchParams(sQueryString);\r\n\r\n        if (searchParams.has(param))\r\n            return searchParams.get(param);\r\n        else\r\n            return \"\";\r\n    }catch(e){\r\n        return e;\r\n    }\r\n}\r\nfunction showTracks(objTracks) {\r\n    console.log(objTracks);\r\n    dspSearchResults.innerHTML = \"\"; //Clear all data before render new data\r\n    try{\r\n        for(let i in objTracks.tracks.items)\r\n            dspSearchResults.appendChild(renderTrack(objTracks.tracks.items[i]));\r\n    }catch (e){\r\n        console.log(e);\r\n    }\r\n}\r\nfunction renderTrack(objTrack) {\r\n    let trackImage;\r\n    objTrack.album.images.length > 2 ? trackImage = objTrack.album.images[2].url : trackImage = imageNotFound;\r\n    let node = document.createElement(\"article\");\r\n    node.innerHTML = `<img src=\"${trackImage}\" alt=\"\" class=\"image\">\r\n                        <p>Album type: ${objTrack.album.album_type}</p>\r\n                        <p>Track name: ${objTrack.name}</p>\r\n                        <p>Artist: ${objTrack.artists[0].name}</p>\r\n                        <p><a href=\"${objTrack.external_urls.spotify}\" target=\"_blank\">Listen on Spotify</a></p>`;\r\n    return node;\r\n}\r\nfunction showArtists(objArtists) {\r\n    console.log(objArtists);\r\n    dspSearchResults.innerHTML = \"\";\r\n    try {\r\n        for(let i in objArtists.artists.items)\r\n            dspSearchResults.append(renderArtist(objArtists.artists.items[i]));\r\n    }catch (e){\r\n        console.log(e);\r\n    }\r\n}\r\nfunction renderArtist(objArtist) {\r\n    let artistImage;\r\n    objArtist.images.length > 2 ? artistImage = objArtist.images[2].url : artistImage = imageNotFound;\r\n    let node = document.createElement(\"article\");\r\n    node.innerHTML = `<img src=\"${artistImage}\" alt=\"\" class=\"image\">\r\n            <p>Artist name: ${objArtist.name}</p>`;\r\n    return node\r\n}\r\nfunction showErrorMessages(objError) {\r\n    console.log(objError);\r\n    dspSearchResults.innerHTML = \"Data not found!\";\r\n}\r\n\r\n//MAIN\r\n//-----Authorization the user-----\r\n//let client_id = \"YOUR_CLIENT_ID\";\r\n//let redirect_uri = encodeURIComponent(\"YOUR_URI\");\r\nlet client_id = \"a91bb3ab45564792a631d13655d609f5\";\r\nlet redirect_uri = encodeURIComponent(\"https://nguyenkhois.github.io/advjs-spotifysearch/demo-purejs/\");\r\nlet response_type = \"token\";\r\nlet scopes = encodeURIComponent(\"user-read-private\");\r\nlet urlAuth = `https://accounts.spotify.com/en/authorize?client_id=${client_id}&redirect_uri=${redirect_uri}&response_type=${response_type}&scope=${scopes}`;\r\n\r\nlet accessToken = getParamFromUrl('access_token') || \"\";\r\nif (accessToken === \"\"){\r\n    btnAuth.disabled = false;\r\n    btnSearch.disabled = true;\r\n}else{\r\n    btnAuth.disabled = true;\r\n    btnSearch.disabled = false;\r\n}\r\n\r\nbtnAuth.addEventListener(\"click\",event => {\r\n    event.preventDefault();\r\n    window.location.href = urlAuth;\r\n});\r\n//-----End of authorization the user-----\r\n\r\n//-----Begin fetch from API-----\r\nbtnSearch.addEventListener(\"click\",event => {\r\n    event.preventDefault();\r\n\r\n    let searchMarket = slMarket.value;\r\n    let searchBy = slSearchBy.value;\r\n    let searchContent = encodeURIComponent(txtSearchContent.value);\r\n    let limit = 10;\r\n    let urlSearch = `https://api.spotify.com/v1/search?q=${searchContent}&type=${searchBy}&market=${searchMarket}&limit=${limit}`;\r\n\r\n    fetch(urlSearch,{\r\n        method: 'GET',\r\n        headers: new Headers({\r\n            'Accept': 'application/json',\r\n            'Content-Type': 'application/json',\r\n            'Authorization': 'Bearer ' + accessToken\r\n        })\r\n    })\r\n    .then(data=>{\r\n        try{\r\n            data.json().then(result=>{\r\n                switch (searchBy){\r\n                    case \"track\":\r\n                        showTracks(result);\r\n                        break;\r\n                    case \"artist\":\r\n                        showArtists(result);\r\n                        break;\r\n                    default:\r\n                        break;\r\n                }\r\n            });\r\n        }catch (error) {\r\n            console.log(error);\r\n        }\r\n    })\r\n    .catch(error=>{\r\n        showErrorMessages(error);\r\n    });\r\n});\r\n//-----End of fetch from API-----\r\n"],"sourceRoot":""}